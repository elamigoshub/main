<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ElAmigos Hub â€” Juegos, fichas y descargas</title>
  <meta name="description" content="Portal de juegos: fichas claras, portadas y enlaces de descarga. RÃ¡pido, simple y organizado." />
  <style>
    :root{
      --bg:#0b1220; --card:#101a30; --muted:#8ea0c7; --text:#eaf0ff;
      --line:rgba(255,255,255,.10); --btn:#2f6bff; --btn2:#22c55e;
      --max:1120px; --r:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      background:radial-gradient(900px 600px at 20% 10%, #182b5a 0%, transparent 55%),
                 radial-gradient(900px 600px at 80% 0%, #0f3b2c 0%, transparent 55%),
                 var(--bg);
      color:var(--text);
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:22px 18px 56px}

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:10px 0 18px; flex-wrap:wrap;
    }
    .brand{display:flex; gap:12px; align-items:center}
    .logo{
      width:40px; height:40px; border-radius:12px;
      background:linear-gradient(135deg, #2f6bff 0%, #22c55e 100%);
      box-shadow:0 10px 30px rgba(47,107,255,.25);
    }
    .brand h1{font-size:16px; margin:0; letter-spacing:.2px}
    .brand p{margin:0; font-size:12px; color:var(--muted)}
    nav{display:flex; gap:10px; flex-wrap:wrap}
    .navlink{
      padding:10px 12px; border:1px solid var(--line); border-radius:999px;
      font-size:13px; color:var(--muted);
      background:rgba(255,255,255,.03);
    }
    .navlink:hover{color:var(--text); border-color:rgba(255,255,255,.22)}

    .hero{
      margin-top:10px;
      border:1px solid var(--line); border-radius:24px;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      padding:28px;
      display:grid; grid-template-columns: 1.2fr .8fr; gap:18px;
    }
    .hero h2{margin:0 0 10px; font-size:34px; line-height:1.05}
    .hero p{margin:0 0 16px; color:var(--muted); font-size:15px; max-width:60ch}
    .cta{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 14px; border-radius:12px; font-weight:700; font-size:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
    }
    .btn.primary{background:var(--btn); border-color:rgba(47,107,255,.35)}
    .btn.primary:hover{filter:brightness(1.05)}
    .btn.green{background:var(--btn2); border-color:rgba(34,197,94,.35); color:#08130b}
    .btn:hover{transform:translateY(-1px)}

    .panel{
      border:1px solid var(--line); border-radius:18px;
      padding:14px; background:rgba(0,0,0,.18);
      display:flex; flex-direction:column; gap:10px; height:100%;
    }
    .search{
      display:flex; gap:10px; align-items:center;
      border:1px solid var(--line); border-radius:14px; padding:10px 12px;
      background:rgba(255,255,255,.03);
    }
    .search input{
      width:100%; border:0; outline:0; background:transparent; color:var(--text);
      font-size:14px;
    }
    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 10px; border-radius:999px; font-size:12px;
      border:1px solid var(--line); color:var(--muted);
      background:rgba(255,255,255,.03);
    }

    .section{
      margin-top:20px;
      border:1px solid var(--line); border-radius:18px;
      padding:16px; background:rgba(255,255,255,.02);
    }
    .section h3{margin:0 0 12px; font-size:16px}
    .cats{display:flex; flex-wrap:wrap; gap:10px}
    .cats button{
      cursor:pointer;
      padding:10px 12px; border-radius:999px; border:1px solid var(--line);
      background:rgba(255,255,255,.03); color:var(--muted); font-size:13px;
    }
    .cats button:hover{color:var(--text); border-color:rgba(255,255,255,.22)}
    .cats button.active{
      background:rgba(47,107,255,.22);
      border-color:rgba(47,107,255,.45);
      color:var(--text);
    }

    .notice{
      margin-top:14px;
      padding:12px 14px;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.03);
      color:var(--muted);
      font-size:13px;
    }

    .grid{
      margin-top:14px;
      display:grid; grid-template-columns: repeat(12, 1fr);
      gap:14px;
    }
    .card{
      grid-column: span 4;
      border:1px solid var(--line); border-radius:var(--r);
      background:rgba(255,255,255,.03);
      overflow:hidden;
      transition: transform .12s ease, border-color .12s ease;
    }
    .card:hover{transform:translateY(-2px); border-color:rgba(255,255,255,.22)}
    .thumb{
      height:150px;
      background:linear-gradient(135deg, rgba(47,107,255,.35), rgba(34,197,94,.22));
      position:relative;
    }
    .thumb img{
      width:100%; height:100%; object-fit:cover; display:block;
    }
    .pill{
      position:absolute; left:10px; bottom:10px;
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.22);
      color:var(--text);
      backdrop-filter: blur(6px);
    }
    .content{padding:12px}
    .title{margin:0 0 6px; font-size:15px}
    .meta{margin:0 0 10px; color:var(--muted); font-size:12px}
    .actions{display:flex; gap:10px}
    .actions a{flex:1; text-align:center; padding:10px 10px; border-radius:12px; font-size:13px}
    .actions .view{border:1px solid var(--line); background:rgba(255,255,255,.03); color:var(--text)}
    .actions .dl{background:rgba(47,107,255,.18); border:1px solid rgba(47,107,255,.35)}
    .actions a:hover{filter:brightness(1.05)}

    footer{
      margin-top:26px; color:var(--muted); font-size:12px;
      display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;
      padding-top:16px; border-top:1px solid var(--line);
    }

    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .card{grid-column: span 6}
    }
    @media (max-width: 560px){
      .card{grid-column: span 12}
      .hero h2{font-size:28px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>ElAmigos Hub</h1>
          <p>Fichas claras â€¢ portadas â€¢ descargas</p>
        </div>
      </div>
      <nav>
        <a class="navlink" href="#games">Juegos</a>
        <a class="navlink" href="#categories">CategorÃ­as</a>
        <a class="navlink" href="/admin/">Admin</a>
      </nav>
    </header>

    <main>
      <section class="hero">
        <div>
          <h2>Juegos originales, fichas rÃ¡pidas y descargas organizadas</h2>
          <p>
            Busca por nombre, filtra por categorÃ­a y entra a cada ficha con portada, info y botones de descarga.
            Todo ligero y listo para escalar.
          </p>
          <div class="cta">
            <a class="btn primary" href="#games">Explorar juegos â†’</a>
            <a class="btn" href="#categories">Ver categorÃ­as</a>
            <a class="btn green" href="#" title="Cuando quieras lo conectamos">Premium</a>
          </div>
        </div>

        <aside class="panel">
          <div class="search">
            <span aria-hidden="true">ðŸ”Ž</span>
            <input id="search" type="search" placeholder="Buscar juegoâ€¦" />
          </div>
          <span class="badge">âš¡ Portadas desde tu PC (admin)</span>
          <span class="badge">ðŸ§¾ Datos centralizados en games.json</span>
          <span class="badge">ðŸŽ¯ Filtro por categorÃ­as automÃ¡tico</span>
        </aside>
      </section>

      <section id="categories" class="section">
        <h3>ðŸ“š CategorÃ­as</h3>
        <div class="cats" id="cats"></div>
        <div class="notice" id="status">Cargando juegosâ€¦</div>
      </section>

      <section id="games" class="section">
        <h3>ðŸŽ® Juegos</h3>
        <div class="grid" id="grid"></div>
      </section>
    </main>

    <footer>
      <div>Â© <span id="year"></span> ElAmigos Hub</div>
      <div>2026 - MÃ¡s libertad para el mundo</div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const statusEl = document.getElementById("status");
    const gridEl = document.getElementById("grid");
    const catsEl = document.getElementById("cats");
    const searchEl = document.getElementById("search");

    let ALL = [];
    let activeCategory = "All";

    function esc(s){
      return String(s ?? "").replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
      }[m]));
    }

    function normalizeCat(c){
      const v = (c || "Other").trim();
      return v ? v : "Other";
    }

    function renderCategories(games){
      const set = new Set(games.map(g => normalizeCat(g.category)));
      const cats = ["All", ...Array.from(set).sort((a,b)=>a.localeCompare(b))];

      catsEl.innerHTML = "";
      cats.forEach(c => {
        const b = document.createElement("button");
        b.textContent = c;
        b.className = (c === activeCategory) ? "active" : "";
        b.onclick = () => {
          activeCategory = c;
          Array.from(catsEl.children).forEach(x => x.classList.remove("active"));
          b.classList.add("active");
          renderGrid();
        };
        catsEl.appendChild(b);
      });
    }

    function matchesFilters(g){
      const q = (searchEl.value || "").trim().toLowerCase();
      const title = (g.title || "").toLowerCase();
      const catOk = (activeCategory === "All") ? true : (normalizeCat(g.category) === activeCategory);
      const qOk = q ? title.includes(q) : true;
      return catOk && qOk;
    }

    function renderGrid(){
      const filtered = ALL.filter(matchesFilters);

      statusEl.textContent = filtered.length
        ? `Mostrando ${filtered.length} juegos${activeCategory !== "All" ? " en " + activeCategory : ""}.`
        : `No hay resultados${activeCategory !== "All" ? " en " + activeCategory : ""}.`;

      gridEl.innerHTML = "";
      filtered.forEach(g => {
        const cover = g.cover
          ? `<img src="${g.cover}" alt="${esc(g.title)}">`
          : "";

        const pill = `${esc(normalizeCat(g.category))}${g.size ? " â€¢ " + esc(g.size) : ""}`;

        const card = document.createElement("article");
        card.className = "card";
        card.innerHTML = `
          <div class="thumb">
            ${cover}
            <span class="pill">${pill}</span>
          </div>
          <div class="content">
            <h4 class="title">${esc(g.title || "Sin tÃ­tulo")}</h4>
            <p class="meta">${esc(g.languages || "")}</p>
            <div class="actions">
              <a class="view" href="game.html?slug=${encodeURIComponent(g.slug || "")}">Ver ficha</a>
              <a class="dl" href="${esc(g.download_free || "#")}" target="_blank" rel="nofollow noopener">Descargar</a>
            </div>
          </div>
        `;
        gridEl.appendChild(card);
      });
    }

    async function init(){
      try{
        const res = await fetch("data/games.json?v=" + Date.now(), { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();

        ALL = Array.isArray(data.games) ? data.games : [];
        if(!ALL.length){
          statusEl.textContent = "No hay juegos todavÃ­a. Entra a /admin y aÃ±ade uno.";
          renderCategories([]);
          return;
        }

        renderCategories(ALL);
        renderGrid();
      }catch(e){
        statusEl.textContent = "Error cargando juegos. Revisa data/games.json y el deploy. (" + e.message + ")";
        console.error(e);
      }
    }

    searchEl.addEventListener("input", renderGrid);
    init();
  </script>
</body>
</html>
